
load("/Users/kewisch/mozilla/ical.js-github/build/ical.js");

function dumpn(x) dump(x + "\n");


const denver =
"BEGIN:VTIMEZONE\r\n" +
"TZID:America/Denver\r\n" +
"BEGIN:DAYLIGHT\r\n" +
"TZOFFSETFROM:-0700\r\n" +
"TZOFFSETTO:-0600\r\n" +
"TZNAME:MDT\r\n" +
"DTSTART:20070311T020000\r\n" +
"RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU\r\n" +
"END:DAYLIGHT\r\n" +
"BEGIN:STANDARD\r\n" +
"TZOFFSETFROM:-0600\r\n" +
"TZOFFSETTO:-0700\r\n" +
"TZNAME:MST\r\n" +
"DTSTART:20071104T020000\r\n" +
"RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU\r\n" +
"END:STANDARD\r\n" +
"BEGIN:DAYLIGHT\r\n" +
"TZOFFSETFROM:-0700\r\n" +
"TZOFFSETTO:-0600\r\n" +
"TZNAME:MDT\r\n" +
"DTSTART:19180331T020000\r\n" +
"RDATE:20030406T020000\r\n" +
"RDATE:20040404T020000\r\n" +
"RDATE:20050403T020000\r\n" +
"RDATE:20060402T020000\r\n" +
"END:DAYLIGHT\r\n" +
"BEGIN:STANDARD\r\n" +
"TZOFFSETFROM:-0600\r\n" +
"TZOFFSETTO:-0700\r\n" +
"TZNAME:MST\r\n" +
"DTSTART:19181027T020000\r\n" +
"RDATE:20031026T020000\r\n" +
"RDATE:20041031T020000\r\n" +
"RDATE:20051030T020000\r\n" +
"RDATE:20061029T020000\r\n" +
"END:STANDARD\r\n" +
"END:VTIMEZONE";


const dta = 
"BEGIN:VTIMEZONE\r\n" +
"TZID:Makebelieve/RDATE_as_date\r\n" +
"X-LIC-LOCATION:Makebelieve/RDATE_as_date\r\n" +
"BEGIN:STANDARD\r\n" +
"TZOFFSETFROM:-0400\r\n" +
"TZOFFSETTO:-0500\r\n" +
"TZNAME:RDATE_as_date_standard\r\n" +
"DTSTART:19700101T020000\r\n" +
"RDATE:19700101T020000\r\n" +
"RDATE;VALUE=DATE:19800101\r\n" +
//"RDATE:19800101T020000\r\n" +
"RDATE:19900101T020000Z\r\n" +
"END:STANDARD\r\n" +
"BEGIN:DAYLIGHT\r\n" +
"TZOFFSETFROM:-0500\r\n" +
"TZOFFSETTO:-0400\r\n" +
"TZNAME:RDATE_as_date_daylight\r\n" +
"DTSTART:19750101T020000\r\n" +
"RDATE:19750101T020000\r\n" +
"RDATE;VALUE=DATE:19850101\r\n" +
//"RDATE:19850101T020000\r\n" +
"RDATE:19950101T020000Z\r\n" +
"END:DAYLIGHT\r\n" +
"END:VTIMEZONE";

let f = ICAL.parse(denver);
let g = new ICAL.Component(f[1]);
let zone = new ICAL.Timezone(g);


var f = new ICAL.Time({ year: 2004, month: 10, day: 31, hour: 0, minute: 0, second: 0,  zone: zone });


for(var i = 0; i < 25;  i++) {
    dumpn(f +  " offset=" + (f.utcOffset() / 3600));
    f.minute += 30;
}
  


dump(g.getAllProperties("rdate").map(function(x)  " - " + x.toSource()).join("\n\n") + "\n");


