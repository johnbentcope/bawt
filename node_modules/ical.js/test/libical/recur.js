

ICAL.debug = true;

var icr = "FREQ=WEEKLY;INTERVAL=2;COUNT=6;BYDAY=WE,SA,SU";
var dtstr = "20081217T133000";
var homwany = 1;

if (arguments.length > 0) {
    icr = arguments[1];
}
if (arguments.length > 1) {
    howmany = parseInt(arguments[2], 10);
}
if (arguments.length > 2) {
    dtstr = arguments[3];
}

let dtstart = new ICAL.icaltime.fromString(dtstr);
let recur = new ICAL.icalrecur.fromString(icr);
let ritr = recur.iterator(dtstart);

dump("Using rule: " + icr + "\n");
dump("Iterating " + howmany + " occurrences beginning from " + dtstr + "\n");

if (ritr) {
    while (howmany--) {
        var next = ritr.next();
        dump(next + "\n");
    }
} else {
    dump("Error getting iterator\n");
}
